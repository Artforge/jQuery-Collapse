<h1>jQuery Collapse</h1>

<p>A lightweight and flexible jQuery plugin that allows you to collapse content. A feature also
known as 'progressive disclosure'.</p>

<p><em>NOTICE: As of August 2012 this plugin has been rewritten from scratch. <br />
The old version is no longer maintained or supported.</em></p>

<p>Enjoy!</p>

<h2>Features</h2>

<ul>
<li><a href="http://dev.opera.com/articles/view/introduction-to-wai-aria/">WAI ARIA</a> compliant</li>
<li>Lightweight (~1.2kb minified and gzipped)</li>
<li>Cross Browser compliant (Tested in >= IE6, Firefox, Safari, Chrome, Opera)</li>
<li><strong>Accordion</strong> behaviour can be enabled. </li>
<li><strong>Persistence</strong> to remember open sections on page reload!</li>
</ul>

<h3>Demo</h3>

<p>A demo showcasing all the features of the plugin can be found at 'demo/demo.html' in
this repository.</p>

<h2>Usage</h2>

<p>Load jQuery and the jQuery Collapse plugin into your document:</p>

<p>```html</p>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script src="jquery.collapse.js"></script>

<p>```</p>

<p>Here's some sample HTML markup:</p>

<p>```html</p>

<div id="demo" data-collapse>
  <h2>Fruits</h2>
  <ul>
    <li>Apple</li>
    <li>Pear</li>
    <li>Orange</li>
  </ul>
  <h2>Info</h2>
  <div>
    <p>You can use any container you like (in this case a div element)</p>
  </div>
</div>

<p>```</p>

<p>That's it! The <em>data-collapse</em> attribute will automatically trigger the script. </p>

<h3>Open/Collapse section by default</h3>

<p>The standard behaviour is to hide all the collapsible sections on page
load. If you want to show a section to the user on page load you can
achieve this by adding an 'open' class to the section heading</p>

<p>```html</p>

<div id="demo" data-collapse>
  <h2 class="open">I'm open by default</h2>
  <p>Yay</p>
</div>

<p>```</p>

<h2>JavaScript usage</h2>

<p>If you'd rather omit the 'data-collapse' attribute in the HTML and load the plugin via jQuery, you can:</p>

<p><code>js
$("#demo").collapse({
  // options...
});
</code></p>

<p>If you don't want to use the jQuery ($) wrapper, you can also access the
plugin with <em>vanilla</em> JavaScript:</p>

<p><code>js
new jQueryCollapse($("#demo"), {
  // options...
});
</code></p>

<h3>Using custom markup</h3>

<p>By default the plugin will look for groups of two elements.
In real lifeâ„¢ your markup may vary and you'll need to customize how the
plugin interprets it. For example</p>

<p>```html</p>

<div id="demo">
  <div>
    <h2>Summary</h2>
    <div>details...</div>
  </div>
  <div>
    <h2>Summary</h2>
    <div>details...</div>
  </div>
</div>

<p>```</p>

<p>In order for the plugin to understand the above markup, we can pass a 'query'
option specifying where to find the header/summary element of a section:</p>

<p><code>js
new jQueryCollapse($("#demo"), {
  query: 'div h2'
});
</code></p>

<h2>Accordion</h2>

<p>To activate the accordion behaviour set 'accordion' as the value of the 'data-collapse' attribute:</p>

<p>```html</p>

<div id="demo" data-collapse="accordion">
  ...
</div>

<p>```</p>

<h2>Persistence</h2>

<p>By default, if the user reloads the page all the sections will be closed. 
If you want previously collapsed sections to stay open you can add 'persist' to the data-collapse attribute:</p>

<p>```html</p>

<div id="demo" data-collapse="persist">
  ...
</div>

<p>```
And include the storage module in your document <em>after</em> the other
scripts.</p>

<p>```html</p>

<script src="jquery.collapse_storage.js"></script>

<p>```</p>

<p>Please note: the target element will need an ID in order for the
persistence to work.</p>

<p>You can combine the accordion and persistence options by adding
both values to the data-collapse attribute:</p>

<p>```html</p>

<div id="demo" data-collapse="accordion persist">
  ...
</div>

<p>```</p>

<p>jQuery Collapse uses HTML5 localStorage if available, otherwise it
will attempt to use cookies (read about IE support below). If that also fails, it will degrade
to work but without any persistence. Add cookie fallback support only if
you need it:</p>

<p>```html</p>

<script src="jquery.collapse_cookie_storage.js"></script>

<p>```</p>

<h3>IE 6-7 Support</h3>

<p>For IE 6-7 you'll also need to add the JSON2.js library (found in
the vendor directory) for the cookie storage to work properly:</p>

<p>```html</p>

<script src="json2.js"></script>

<p>```</p>

<h2>API Documentation</h2>

<p>Here are the exposed options and events that you can play around with
using JavaScript. Enjoy.</p>

<h3>Options</h3>

<p>You can pass the following options when initializing
the plugin with JavaScript.</p>

<ul>
<li><strong>show</strong> (function) : Custom function for showing content (default: function(){ this.show() })</li>
<li><strong>hide</strong> (function) : Custom function for hiding content (default: function(){ this.hide() })</li>
<li><strong>accordion</strong> (bool) : Enable accordion behaviour by setting this option to 'true'</li>
<li><strong>persist</strong> (bool) : Enable persistence between page loads by setting this option to 'true'</li>
</ul>

<p>Example usage of options:</p>

<p><code>js
// Initializing collapse plugin
// with custom show/hide methods,
// persistence plugin and accordion behaviour
$("#demo").collapse({
  show: function() {
    // The context of 'this' is applied to
    // the collapsed details in a jQuery wrapper 
    this.slideDown(100);
  },
  hide: function() {
    this.slideUp(100);
  },
  accordion: true,
  persist: true
});
</code></p>

<h3>Events</h3>

<h4>Binding events</h4>

<p>You can bind your own callbacks to the open and close events for a
section.</p>

<p>```js
$("#demo").collapse(); // Initializing plugin</p>

<p>$("#demo").bind("open", function(e, section) {
  console.log(section, " is open");
});</p>

<p>$("#demo").bind("close", function(e, section) {
  console.log(section, " is closed");
});
```</p>

<h3>API methods</h3>

<p>If you're using vanilla JavaScript to instantiate the plugin, you'll get
access to the <em>open</em> and <em>close</em> methods.</p>

<p>```js</p>

<p>var demo = new jQueryCollapse($("#demo")); // Initializing plugin
demo.open(); // Open all sections
demo.close(); // Close all sections
demo.open(0); // Open first section
demo.open(1); // Open second section
demo.close(0); // Close first section
```</p>

<h2>Contributing</h2>

<p>Did you find a bug? Do you want to introduce a feature? Here's what to do (in the following order)</p>

<ul>
<li>Find a bug, or invent a feature.</li>
<li>Write a test case (located in ./spec/*_spec.coffee)</li>
<li>Watch it fail (red light)</li>
<li>Fix bug / introduce feature</li>
<li>Watch it pass (green light)</li>
<li>Refactor / Perfectionize!</li>
<li>Do a pull request on Github</li>
<li>Wait patiently...</li>
<li>Rejoice!</li>
</ul>

<p>Tests are written in CoffeeScript with a BDD flavour using the <a href="http://busterjs.org/">Buster.js</a> test framework.</p>

<p>Thanks in advance</p>
